function tc__treelist__drawPagesList(t,e,i,l){var r,_;return e&&0!==e.length&&void 0!==e.length?(r={},e.forEach(function(e){e.id===t.headerpageid?r.headerPage=e:e.id===t.footerpageid?r.footerPage=e:e.id===t.page404id&&(r.page404=e)}),_="",i&&0<i.length&&(_+=tc__treelist__drawFoldersList(i,e,t.id,t.indexpageid,t.kind,l)),e.forEach(function(e){"0"===e.folderid&&""===e.trash&&t.headerpageid!==e.id&&t.footerpageid!==e.id&&t.page404id!==e.id&&(e={page:e,currentpageid:window.pageid,indexpageid:t.indexpageid,wrapperClass:l},_+=tc__treelist__drawPage(e))}),i={currentpageid:window.pageid,indexpageid:t.indexpageid,wrapperClass:l},r.headerPage&&(i.page=r.headerPage,i.specialPage="header",_+=tc__treelist__drawPage(i)),r.footerPage&&(i.page=r.footerPage,i.specialPage="footer",_+=tc__treelist__drawPage(i)),r.page404&&(i.page=r.page404,i.specialPage="404",_+=tc__treelist__drawPage(i)),_):'<div class="tc-treelist__pagelist__no-pages-in-project">'+("em"===t.kind?"{{no_emails_yet}}":"{{no_pages_yet}}")+"</div>"}function tc__treelist__drawFoldersList(e,i,t,l,r,_){e.forEach(function(t){t.id==window.folderid&&(t.isCurrent=!0),t.pages=[],i.forEach(function(e){e.folderid===t.id&&(t.pages.push(e),e.id==window.pageid)&&(t.isCurrent=!0)})});var s="tc-sidebar"===_?22:36,a="";return e.forEach(function(e){""===e.trash&&(a+='<div class="tc-treelist__pagelist__folder tc-treelist__sort__item'+(e.isCurrent?" tc-treelist__pagelist__folder_current js-treelist-opened-folder":"")+'" data-folderid="'+e.id+'"><div class="tc-treelist__folder__title-wrapper" draggable="true"><span class="tc-treelist__arrow'+(e.isCurrent?" tc-treelist__arrow_opened":"")+'"></span><a href="https://tilda.cc/projects/?projectid='+t+"&folderid="+e.id+'" class="tc-treelist__folder__title tc-treelist__tooltip"'+(e.title.length>s?'title="'+e.title+'"':"")+">"+(e.title.length>s?e.title.slice(0,s)+"...":e.title)+'</a></div><div class="tc-treelist__page-list-folder__pages'+(e.isCurrent?" tc-treelist__page-list-folder__pages_opened":"")+' tc-treelist__page__sortable-container"  data-projectid="'+t+'" data-folderid="'+e.id+'">',e.pages&&0<e.pages.length&&e.pages.forEach(function(e){e={page:e,currentpageid:window.pageid,indexpageid:l};a+=tc__treelist__drawPage(e)}),a=a+('<div class="tc-treelist__folder__no-pages'+(e.pages&&0<e.pages.length?" tc-treelist__folder__no-pages_hidden":""))+'">'+("em"===r?"{{no_emails_yet}}":"{{no_pages_yet}}")+"</div > </div></div>")}),a}function tc__treelist__drawPage(e){var t,i=""!==e.page.published,l=e.page.published<e.page.changed,r="",_="",i=(i?l?(r="tc-treelist__page_changed",_="{{changes_not_published}}"):r="tc-treelist__page_unchanged":(r="tc-treelist__page_unpublished",_="{{page_not_published}}"),"tc-treelist__page__icon"),l=(e.indexpageid===e.page.id?i+=" tc-treelist__page__icon_index":"header"===e.specialPage?i+=" tc-treelist__page__icon_header":"footer"===e.specialPage?i+=" tc-treelist__page__icon_footer":"404"===e.specialPage&&(i+=" tc-treelist__page__icon_404"),e.page.title),s=("header"===e.specialPage?l="Header":"footer"===e.specialPage?l="Footer":"404"===e.specialPage&&(l="{{error_404}}"),t="tc-sidebar"===e.wrapperClass?"0"!==e.page.folderid?17:21:"0"!==e.page.folderid?26:30,"");return s+='<div class="tc-treelist__page tc-treelist__sort__item'+(e.page.id==e.currentpageid?" tc-treelist__page_current":"")+(r?" "+r:"")+(e.indexpageid===e.page.id?" js-treelist-index-page":"")+(e.specialPage?" js-treelist-special-page":"")+'"data-pageid="'+e.page.id+'"data-projectid="'+e.page.projectid+'"data-folderid="'+e.page.folderid+'"'+(e.page.alias?'data-alias="'+e.page.alias+'"':"")+(e.specialPage?"":'draggable="true"')+'><a class="tc-treelist__page__title'+(e.page.id==e.currentpageid?" tc-treelist__page__title_current":"")+'" href="/page/?pageid='+e.page.id+'"'+(e.specialPage?'draggable="false"':"")+'><div class="'+i+(_?" tc-treelist__tooltip":"")+'"'+(_?' title="'+_+'"':"")+'></div><span class="tc-treelist__page__name'+(l.length>t?" tc-treelist__tooltip":"")+'"'+(l.length>t?' title="'+l+'"':"")+(e.specialPage?'data-title="'+e.page.title+'"':"")+">"+(l.length>t?l.slice(0,t)+"...":l)+'</span></a><div class="tc-treelist__page__options"><div class="tc-treelist__page__option tc-treelist__setting__button tc-treelist__tooltip" title="{{open_page_settings}}"onclick="tc__treelist__showPageSettings(\''+e.page.id+"')\"></div></div></div>"}function tc__treelist__toggleFolder(e){var e=e.target,t=e.closest(".tc-treelist__pagelist__folder"),i=e.closest("[data-sortable-id]").getAttribute("data-sortable-id"),i=window.sortables.get(i),l=t.querySelector(".tc-treelist__page-list-folder__pages");t.classList.toggle("js-treelist-opened-folder"),e.classList.toggle("tc-treelist__arrow_opened"),l&&l.classList.toggle("tc-treelist__page-list-folder__pages_opened"),e.classList.contains("tc-treelist__arrow_opened")||window.tc__treelist__multiple&&window.tc__treelist__multiple.init&&window.tc__treelist__multiple.folderid===t.getAttribute("data-folderid")&&tc__treelist__multiple__clearSelection(t),i.update()}function tc__treelist__addTSortable(e){"function"==typeof TSortable?tc__treelist__initTSortable(e):"function"==typeof tc__connectTSortable&&tc__connectTSortable(function(){tc__treelist__initTSortable(e)})}function tc__treelist__initTSortable(e){e=e.querySelectorAll(".js-treelist-container");Array.prototype.forEach.call(e,function(e){var t=new TSortable(e,{selector:".tc-treelist__sort__item",handleSelector:".tc-treelist__sort__item",multipleSelector:".tc__treelist__multiple_selected",isAutoUpdateEnabled:!0,cancelSelector:".js-treelist-special-page",noAfterSelector:".js-treelist-special-page",specificSelector:".tc-treelist__pagelist__folder",dragImage:{className:"tc-treelist__drag-image",offset:0,maxWidth:210},dropBar:{className:"tc-treelist__dropbar",visibleClassName:"tc-treelist__dropbar_visible",vIndent:0},dropArea:{className:"tc-treelist__droparea",visibleClassName:"tc-treelist__droparea_visible"},toleranceDistance:0,onStart:function(e){e=e.draggingElements[0];window.tc__treelist__initSortWrapper=e.closest(".tc-treelist__page__sortable-container")?e.closest(".tc-treelist__page__sortable-container"):e.closest(".js-treelist-container")},onBeforeDrop:function(e){var t=e.draggingElements[0],i=e.relativeTargets,l=i.prevEl,r=i.nextEl,_=t.classList.contains("tc-treelist__pagelist__folder"),s=l&&l.classList.contains("tc-treelist__pagelist__folder"),a=r&&r.classList.contains("tc-treelist__pagelist__folder"),t=t.classList.contains("js-treelist-index-page"),i=i.parentEl&&i.parentEl.classList.contains("tc-treelist__pagelist__folder")||l&&l.closest(".tc-treelist__pagelist__folder")&&r&&r.closest(".tc-treelist__pagelist__folder");t&&i&&(alert("This page is set as a Home Page and cannot be moved to any folder"),e.preventDefault()),_&&l&&!s&&e.preventDefault(),!_&&a&&e.preventDefault()},onDrop:function(e){var t,i,l,r,_,s,a,o,c;e.draggingElements[0].classList.contains("tc-treelist__pagelist__folder")?(t=e.draggingElements[0],setTimeout(function(){tc__treelist__saveSort("folder",t.closest(".js-treelist-container"))},1e3)):(i=window.tc__treelist__initSortWrapper,o=(_=e.relativeTargets).prevEl,c=_.nextEl,a=_.parentEl,s=e.draggingElements[0],l=_.parentEl&&a.classList.contains("tc-treelist__pagelist__folder")||o&&o.closest(".tc-treelist__pagelist__folder")&&c&&c.closest(".tc-treelist__pagelist__folder")?s.closest(".tc-treelist__page__sortable-container"):s.closest(".js-treelist-container"),r=l.getAttribute("data-folderid")||"0",_=i.getAttribute("data-folderid")||"0",a=i.querySelectorAll(".tc-treelist__page"),(o=i.querySelector(".tc-treelist__folder__no-pages"))&&(0===a.length?o.classList.remove("tc-treelist__folder__no-pages_hidden"):o.classList.add("tc-treelist__folder__no-pages_hidden")),c=l.querySelectorAll(".tc-treelist__page"),(s=l.querySelector(".tc-treelist__folder__no-pages"))&&(0===c.length?s.classList.remove("tc-treelist__folder__no-pages_hidden"):s.classList.add("tc-treelist__folder__no-pages_hidden")),window.tc__treelist__multiple&&window.tc__treelist__multiple.init&&window.tc__treelist__multiple.folderid&&_==window.tc__treelist__multiple.folderid&&tc__treelist__multiple__clearSelection(l),i!=l&&"/page/"===window.location.pathname&&i!=l&&(a=e.draggingElements.filter(function(e){return e.classList.contains("tc-treelist__page_current")})).length&&(o=document.querySelector(".tp-menu__folder"),"0"==r?(delete window.folderid,delete window.foldertitle):(c=a[0].closest(".tc-treelist__pagelist__folder").querySelector(".tc-treelist__folder__title").getAttribute("title"),window.folderid=r,window.foldertitle=c),o)&&(o.innerHTML=tp__menu__draw__breadcrumbs_folder()),setTimeout(function(){i!=l&&Array.prototype.forEach.call(e.draggingElements,function(e){tc__treelist__movePagetoFolder(e.getAttribute("data-pageid"),r),e.setAttribute("data-folderid",r)}),tc__treelist__saveSort("page",l)},1e3))},onExpand:function(e){e.preventDefault();var t=e.targetEl.querySelector(".tc-treelist__arrow");e.target.classList.contains("js-treelist-opened-folder")||tc__treelist__toggleFolder({target:t})},nested:{isEnabled:!0,containerTagName:"div",containerClassName:"tc-treelist__page-list-folder__pages",noNestedSelector:".tc-treelist__page",noDropInsideSelector:".tc-treelist__pagelist__folder",isExpandEnabled:!0,expandedClassName:"js-treelist-opened-folder",noExpandSelector:".tc-treelist__page"}}),i=(t.init(),String(performance.now()));e.setAttribute("data-sortable-id",i),window.sortables||(window.sortables=new Map),window.sortables.set(i,t)})}function tc__treelist__ajax__getSidebar(e,i){tc__treelist__ajax({url:"/projects/get/getsidebar/",dataToSend:e,ui:{ctext:"getting pages list",isQuiet:!0},onSuccess:function(e){if(check_logout(e),""===e)td__showBubbleNotice("Error. Request response is empty. Please reload the page and try again.",6e3,"error");else{try{var t=JSON.parse(e)}catch(e){console.log("json parse error")}"object"==typeof t?i(t):td__showBubbleNotice("Request error. "+e,6e3,"error")}}})}function tc__treelist__movePagetoFolder(e,t){e={pageid:e,csrf:getCSRF()};"0"==t?e.comm="movepagetorootfolder":(e.comm="movepagetofolder",e.folderid=t),tc__treelist__ajax({url:"/projects/submit/",dataToSend:e,ui:{ctext:"move page to folder"},onSuccess:function(e){check_logout(e)}})}function tc__treelist__saveSort(e,t){var i={},l="",r=!1;switch(e){case"page":var _=t.querySelectorAll(".tc-treelist__page"),s="data-pageid";i.comm="savepagessort",i.projectid=t.getAttribute("data-projectid"),l="save pages sort",r=!0;break;case"folder":_=t.querySelectorAll(".tc-treelist__pagelist__folder"),s="data-folderid";i.comm="savefolderssort",i.projectid=t.getAttribute("data-projectid"),l="save folders sort",r=!0;break;case"project":_=t.querySelectorAll(".tc-sidebar__project__wrapper"),s="data-projectid";i.comm="saveprojectssort",l="saving projects order"}e=Array.prototype.map.call(_,function(e){return e.getAttribute(s)});i.sorts=e,i.csrt=getCSRF(),tc__treelist__ajax({url:"/projects/submit/",dataToSend:i,ui:{ctext:l},onSuccess:function(e){check_logout(e),r&&(window.tc__treelist__needToRender=!0)},onError:function(){alert("Request timeout ("+l+")"),window.location.reload()}})}function tc__treelist__search__init(t){var i,l,e=t.querySelector(".js-treelist-search-button"),r=t.querySelector(".js-treelist-search-wrapper");r&&(i=r.querySelector(".js-treelist-search-input"),e)&&r&&(l={value:"",timer:"",projectWrapper:t,searchInput:i,inputCloseBtn:t.querySelector(".js-treelist-search-close")},e.addEventListener("click",function(){window.tc__treelist__multiple&&window.tc__treelist__multiple.init&&window.tc__treelist__multiple.projectid===t.getAttribute("data-projectid")&&tc__treelist__multiple__clearSelection(t);var e=r.classList;e.toggle("tc-treelist__search__wrapper_opened"),t.classList.toggle("js-treelist-search-opened"),e.contains("tc-treelist__search__wrapper_opened")?i.focus():(tc__treelist__search__clear(l),setTimeout(function(){l.searchInput.value=""},300))}),l.searchInput.addEventListener("keyup",function(e){""===l.searchInput.value?(tc__treelist__search__clear(l),clearTimeout(l.timer),l.inputCloseBtn.style.display="none"):(l.inputCloseBtn.style.display="block",clearTimeout(l.timer),"Enter"===e.key?(l.value=l.searchInput.value,tc__treelist__search__do(l),clearTimeout(l.timer)):l.timer=setTimeout(function(){var e=l.searchInput.value;e!==l.value&&(3<=e.length?(l.value=e,tc__treelist__search__do):tc__treelist__search__clear)(l)},500))}),l.inputCloseBtn.addEventListener("click",function(){tc__treelist__search__clear(l),clearTimeout(l.timer),l.inputCloseBtn.style.display="none",l.searchInput.value="",i.focus()}))}function tc__treelist__search__do(e){var t=e.projectWrapper.querySelector(".js-treelist-container"),i=t.querySelectorAll(".tc-treelist__pagelist__folder"),l=t.querySelectorAll(".tc-treelist__page__wrapper"),r=(r=e.value.toLowerCase()).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e=(tc__treelist__search__clear(e),Array.prototype.forEach.call(l,function(e){var t=e.querySelector(".tc-treelist__page__name"),i=t.innerHTML.toLowerCase(),t=(t=t.getAttribute("data-title")||"").toLowerCase(),l=(l=e.getAttribute("data-alias")||"").toLowerCase();-1===i.indexOf(r)&&-1===t.indexOf(r)&&-1===l.indexOf(r)?e.classList.add("tc-treelist__page_hidden"):e.classList.remove("tc-treelist__page_hidden")}),e.projectWrapper.querySelectorAll(".tc-treelist__page_hidden"));l.length===e.length?(Array.prototype.forEach.call(i,function(e){e.classList.add("tc-treelist__pagelist__folder_hidden")}),t.querySelector(".tc-treelist__pagelist__no-pages").classList.remove("tc-treelist__pagelist__no-pages_hidden")):Array.prototype.forEach.call(i,function(e){var t=e.querySelectorAll(".tc-treelist__page"),i=e.querySelectorAll(".tc-treelist__page_hidden");t.length===i.length?e.classList.add("tc-treelist__pagelist__folder_hidden"):(t=e.querySelector(".tc-treelist__arrow:not(.tc-treelist__arrow_opened)"))&&t.click()})}function tc__treelist__search__clear(e){e.value&&(e.value="");var t=e.projectWrapper.querySelectorAll(".tc-treelist__page"),i=e.projectWrapper.querySelectorAll(".tc-treelist__pagelist__folder");Array.prototype.forEach.call(t,function(e){e.classList.remove("tc-treelist__page_hidden")}),Array.prototype.forEach.call(i,function(e){var t=e.classList.contains("tc-treelist__pagelist__folder_current"),i=e.classList.contains("js-treelist-opened-folder");e.classList.remove("tc-treelist__pagelist__folder_hidden"),(t&&!i||!t&&i)&&e.querySelector(".tc-treelist__arrow").click()}),e.projectWrapper.querySelector(".tc-treelist__pagelist__no-pages").classList.add("tc-treelist__pagelist__no-pages_hidden")}function tc__treelist__search__closeAll(e){e=e.querySelectorAll(".tc-treelist__search__wrapper_opened");Array.prototype.forEach.call(e,function(e){var t,i=e.closest(".tc-sidebar__project__wrapper")||e.closest(".tp-menu__dropdown__menu");i&&(t={projectWrapper:i,searchInput:e.querySelector(".js-treelist-search-input")},setTimeout(function(){tc__treelist__search__clear(t),e.classList.toggle("tc-treelist__search__wrapper_opened"),t.searchInput.value=""},300))})}function tc__treelist__showPageSettings(i){tc__treelist__showLoader(),"object"!=typeof TUWidget&&(tc__loadCSSFile("https://tilda.cc/front/css/t-upload.min.css"),tc__loadJSFile("https://tilda.cc/front/js/t-upload.min.js")),tc__loadJSFile("https://tilda.cc/front/js/td-pagesettings-all.min.js?v="+window.ver,function(){tc__loadJSFile("https://tilda.cc/front/js/td-folders.min.js?v="+window.ver,function(){tc__loadJSFile("https://tilda.cc/front/js/td-other.min.js?v="+window.ver,function(){tc__loadJSFile("https://tilda.cc/front/js/punicode.min.js?v="+window.ver,function(){var e={comm:"getpagesettings",pageid:i,js:"js3page",csrf:getCSRF()},t=(document.getElementById("popup_pagesettings")||document.body.insertAdjacentHTML("beforeend",'<div class="td-popup" id="popup_pagesettings"><div class="td-popup__wrap"><div class="td-popup-window"></div></div></div>'),showpopup("#popup_pagesettings",""),td__pagesettings__drawBody(i),document.querySelector("#popup_pagesettings .td-popup-window__middle"));t&&t.insertAdjacentHTML("beforeend",'<div style="text-align:center; padding:100px;" id="pagesettingsloader"><img src="/tpl/img/ajax-loader.gif"></div>'),init_popup(),td__load("/projects/get/getpagesettings/",e,{ctext:"opening page settings dialog"},function(e){var t=document.getElementById("pagesettingsloader");t&&t.remove(),td__pagesettings__init(e)}),tc__treelist__hideLoader()})})})})}function tc__treelist__showLoader(){document.querySelector(".tc-sidebar_opened")&&"function"==typeof tc__sidebar__showLoader?tc__sidebar__showLoader():"function"==typeof showLoadIcon&&showLoadIcon()}function tc__treelist__hideLoader(){document.querySelector(".tc-sidebar_opened")&&"function"==typeof tc__sidebar__hideLoader?tc__sidebar__hideLoader():"function"==typeof hideLoadIcon&&hideLoadIcon()}function tc__treelist__multiple__init(e){var e=e.querySelectorAll(".tc-treelist__page a"),t=tc__treelist__multiple__defineHotkey();window.tc__treelist__multiple={},window.tc__treelist__multiple.pages=[],window.tc__treelist__multiple.isMultiple=!1,window.tc__treelist__multiple.isShiftMultiple=!1,document.body.addEventListener("keydown",function(e){e=e.key;e&&e==t&&(window.tc__treelist__multiple.isMultiple=!0,window.tc__treelist__multiple.isShiftMultiple=!1),"Shift"==e&&(window.tc__treelist__multiple.isMultiple=!1,window.tc__treelist__multiple.isShiftMultiple=!0)}),document.body.addEventListener("keyup",function(){window.tc__treelist__multiple.isMultiple=!1,window.tc__treelist__multiple.isShiftMultiple=!1}),e.forEach(function(e){e.addEventListener("click",tc__treelist__multiple__addEventToPage)})}function tc__treelist__multiple__addEventToPage(e){if(window.tc__treelist__multiple.isMultiple||window.tc__treelist__multiple.isShiftMultiple){var t=e.target.closest(".tc-sidebar__project__wrapper")||e.target.closest(".tp-menu__dropdown__menu");if(!t||!t.classList.contains("js-treelist-search-opened")){e.preventDefault();var t=document.querySelector(".tc-sidebar_opened")||document.querySelector(".tp-menu__dropdown__menu_opened"),i=(window.tc__treelist__multiple.init=!0,e.target.closest(".tc-treelist__page")),l=i.classList.contains("tc__treelist__multiple_selected"),e=i.closest(".tc-treelist__page__sortable-container")||i.closest(".js-treelist-container"),r=t.querySelector(".js-treelist-multiple-wrapper");if(r&&e===r||(r&&e!==r&&tc__treelist__multiple__clearSelection(r),e.classList.add("js-treelist-multiple-wrapper"),window.tc__treelist__multiple.projectid=i.getAttribute("data-projectid"),window.tc__treelist__multiple.folderid=i.getAttribute("data-folderid")),window.tc__treelist__multiple.isShiftMultiple&&!window.tc__treelist__multiple.isMultiple)if(e.querySelector(".js-treelist-multiple-lastSelected")){function _(e){var t=a[n],e=1===e?t.previousSibling:t.nextSibling;t.classList.contains("js-treelist-multiple-lastSelected")&&(o=!0),e===i&&(c=!0),o&&!c&&tc__treelist__selectUnselectOne(l,t)}for(var s,a=e.querySelectorAll(".tc-treelist__page"),o=!1,c=!1,n=0;n<a.length;n++){var d=a[n];if(d===i){s=-1;break}if(d.classList.contains("js-treelist-multiple-lastSelected")){s=1;break}}if(1===s)for(n=0;n<a.length;n++)_(s);else if(-1===s)for(n=a.length-1;0<=n;n--)_(s)}else tc__treelist__multiple__selectPage(i,e);else window.tc__treelist__multiple.isMultiple&&!window.tc__treelist__multiple.isShiftMultiple&&tc__treelist__selectUnselectOne(l,i);0===t.querySelectorAll(".tc__treelist__multiple_selected").length&&tc__treelist__multiple__clearSelection(t)}}}function tc__treelist__selectUnselectOne(e,t){(e?tc__treelist__multiple__unselectPage:tc__treelist__multiple__selectPage)(t)}function tc__treelist__multiple__selectPage(e){var t;e.classList.contains("tc__treelist__multiple_selected")||((t=(e.closest(".tc-treelist__page__sortable-container")||e.closest(".js-treelist-container")).querySelector(".js-treelist-multiple-lastSelected"))&&t.classList.remove("js-treelist-multiple-lastSelected"),e.classList.add("js-treelist-multiple-lastSelected"),e.classList.add("tc__treelist__multiple_selected"),window.tc__treelist__multiple.pages.push(e))}function tc__treelist__multiple__unselectPage(e){var t;e.classList.contains("tc__treelist__multiple_selected")&&(t=e.getAttribute("data-pageid"),e.classList.remove("tc__treelist__multiple_selected"),window.tc__treelist__multiple.pages=window.tc__treelist__multiple.pages.filter(function(e){return e.getAttribute("data-pageid")!==t}),e.classList.contains("js-treelist-multiple-lastSelected"))&&(e.classList.remove("js-treelist-multiple-lastSelected"),window.tc__treelist__multiple.pages.length)&&window.tc__treelist__multiple.pages[window.tc__treelist__multiple.pages.length-1].classList.add("js-treelist-multiple-lastSelected")}function tc__treelist__multiple__clearSelection(e){var t=e.querySelectorAll(".tc__treelist__multiple_selected"),t=(Array.prototype.forEach.call(t,function(e){e.classList.remove("tc__treelist__multiple_selected")}),e.querySelector(".js-treelist-multiple-wrapper"));(t=!t&&e.classList.contains("js-treelist-multiple-wrapper")?e:t)&&(t.classList.remove("js-treelist-multiple-wrapper"),e=t.querySelector(".js-treelist-multiple-lastSelected"))&&e.classList.remove("js-treelist-multiple-lastSelected"),window.tc__treelist__multiple.init=!1,window.tc__treelist__multiple.pages=[],window.tc__treelist__multiple.projectid="",window.tc__treelist__multiple.folderid=""}function tc__treelist__multiple__defineHotkey(){var e=-1<navigator.userAgent.indexOf("Macintosh")?"Meta":"Control";return e}function tc__treelist__ajax__encodeData(e,l){var t,r="";if(Array.isArray(e))Array.prototype.forEach.call(e,function(e,t){var i;"object"==typeof e&&"name"in e?(r+=r?"&":"",i="",i=l?encodeURIComponent(l+"["+e.name+"]"):encodeURIComponent(e.name),r+=i+"="+encodeURIComponent(e.value)):"string"==typeof e||"number"==typeof e||"boolean"==typeof e||null===e?(r+=r?"&":"",i="",i=l?encodeURIComponent(l+"["+t+"]"):encodeURIComponent(t),r+=i+"="+encodeURIComponent(e)):"object"==typeof e&&(r=(r+=r?"&":"")+tc__treelist__ajax__encodeData(e,l?l+"["+t+"]":t))});else if("object"==typeof e&&null!==e)for(var i in e)r+=r?"&":"","object"==typeof e[i]&&null!==e?r+=tc__treelist__ajax__encodeData(e[i],l?l+"["+i+"]":i):"string"!=typeof e[i]&&"number"!=typeof e[i]&&"boolean"!=typeof e[i]&&null!==e[i]||(t="",t=l?encodeURIComponent(l+"["+i+"]"):encodeURIComponent(i),r+=t+"="+encodeURIComponent(e[i]));return r}function tc__treelist__ajax(e){var t,i,l,r=e.url,_=e.dataToSend||"",s=e.ui||{isQuiet:!1,ctext:""},a=(s.ctext||(s.ctext=""),e.onSuccess),o=e.onError,c=e.onComplete,n=e.responseType||"text",d=e.method||"POST",e=e.timeout||25e3;if(r)return t=!1,"/page/publish/"===r||s.isQuiet||(tc__treelist__showLoader(),t=!0),i=Date.now(),(l=new XMLHttpRequest).open(d,r,!0),l.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),l.timeout=e,l.responseType=n,e=tc__treelist__ajax__encodeData(_),l.addEventListener("loadend",function(){200<=this.status&&this.status<400&&(t&&tc__treelist__hideLoader(),"function"==typeof a&&a.call(this,"json"===n?this.response:this.responseText),"function"==typeof c)&&c.call(this)}),l.addEventListener("timeout",function(){t&&tc__treelist__hideLoader();var e=Date.now()-i;logNetworkError("ajax",r,_,e/1e3,{}),s.isQuiet||alert("Request timeout ("+s.ctext+"). Please reload the page and try again."),"function"==typeof o&&o.call(this),"function"==typeof c&&c.call(this)}),l.addEventListener("abort",function(){t&&tc__treelist__hideLoader(),"function"==typeof o&&o.call(this),"function"==typeof c&&c.call(this)}),l.addEventListener("error",function(){t&&tc__treelist__hideLoader();var e=Date.now()-i;console.log(this.status),400<=l.status?(s.isQuiet||td__showBubbleNotice("Error status: "+this.status+". (action: "+s.ctext+")",6e3,"error"),logAjaxError(r,_,"comm: "+_.comm+", (td__ajax)",l.status,{ts_delta:parseInt(e/1e3),exception:"error",ui:s})):0===l.status&&e<100&&!s.isQuiet&&alert("Request error ("+s.ctext+"). Please check your Internet connection and try again."),"function"==typeof o&&o.call(this),"function"==typeof c&&c.call(this)}),e&&"POST"===d?l.send(e):l.send(),l}function tc__treelist__scrollTo(i,l,r){var _,s;i&&("string"==typeof scrollTop&&(l=l.replace("px","")),l=parseInt(l,10),isNaN(l)||(r=r||600,_=i.scrollTop,requestAnimationFrame(function e(t){t=(t=(t-(s=s||t))/r)<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2;i.scrollTop=(l-_)*Math.min(t,1)+_,t<1?requestAnimationFrame(e):i.scrollTop=l})))}
